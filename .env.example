# -----------------
# Docker settings
# -----------------
POSTGRES_IMAGE_TAG=16-alpine
CLICKHOUSE_IMAGE_TAG=24.9.1-alpine
CONTROLLER_UPSTREAM=http://controller:8080
PANEL_UPSTREAM=http://panel:3000

# -----------------
# Caddy settings
# -----------------

# Domains
API_DOMAIN=devapi.netwatcher.io
APP_DOMAIN=devapp.netwatcher.io

# -----------------
# Frontend settings
# -----------------

CONTROLLER_ENDPOINT=https://devapi.netwatcher.io

# -----------------
# App settings
# -----------------
DEBUG=true
LISTEN=0.0.0.0:8080
JWT_SECRET=
PIN_PEPPER=nw-testing123

# Enable or disable user registration (default: true)
REGISTRATION_ENABLED=true

# -----------------
# ClickHouse / Database
# -----------------

CLICKHOUSE_HOST=
CLICKHOUSE_PORT=9000
CLICKHOUSE_USER=netwatcher
CLICKHOUSE_PASSWORD=
CLICKHOUSE_DB=default

# -----------------
# GORM / Database
# -----------------

# Which driver to use: postgres | mysql | sqlite | sqlserver
DB_DRIVER=postgres

# Common (pooling, logging)
GORM_LOG=info                  # silent|error|warn|info
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=25
DB_CONN_MAX_LIFETIME=30m
DB_CONN_MAX_IDLE_TIME=10m

# -----------------
# PostgreSQL
# -----------------
POSTGRES_HOST=
POSTGRES_PORT=5432
POSTGRES_USER=netwatcher
POSTGRES_PASSWORD=   # <--- set this!
POSTGRES_DB=netwatcher
POSTGRES_SSLMODE=disable
POSTGRES_TIMEZONE=America/Vancouver

# -----------------
# Email / SMTP
# -----------------
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@netwatcher.io
SMTP_FROM_NAME=NetWatcher
SMTP_TLS=true
SMTP_SKIP_VERIFY=false

# -----------------
# Email / Webhook (alternative to SMTP)
# Use this to send email data to external services
# If configured, takes precedence over SMTP
# -----------------
EMAIL_WEBHOOK_URL=
EMAIL_WEBHOOK_AUTH_TOKEN=
EMAIL_WEBHOOK_TIMEOUT=30s

# -----------------
# Email Features
# -----------------
EMAIL_SEND_REGISTRATION_CONFIRMATION=false
# Require email verification before users can create workspaces (default: false)
REQUIRE_EMAIL_VERIFICATION=false
EMAIL_VERIFICATION_EXPIRY_HOURS=24
EMAIL_INVITE_EXPIRY_HOURS=168
EMAIL_PASSWORD_RESET_EXPIRY_HOURS=1

# Panel endpoint for email links (invites, password resets)
PANEL_ENDPOINT=https://app.netwatcher.io

# -----------------
# GeoIP / MaxMind
# -----------------
# Paths to MaxMind GeoLite2 .mmdb database files
# Leave empty to disable GeoIP lookups
GEOIP_CITY_PATH=/data/geoip/GeoLite2-City.mmdb
GEOIP_COUNTRY_PATH=/data/geoip/GeoLite2-Country.mmdb
GEOIP_ASN_PATH=/data/geoip/GeoLite2-ASN.mmdb

# -----------------
# Data Retention
# -----------------
# Days to keep probe data in ClickHouse (updates TTL on startup)
DATA_RETENTION_DAYS=90
# Days before hard-deleting soft-deleted agents/probes
SOFT_DELETE_GRACE_DAYS=30
# How often cleanup runs (hours)
CLEANUP_INTERVAL_HOURS=24

# -----------------
# Workspace Limits
# -----------------
# Maximum members per workspace (0 = unlimited)
MAX_MEMBERS_PER_WORKSPACE=0
# Maximum agents per workspace (0 = unlimited)
MAX_AGENTS_PER_WORKSPACE=0
# Maximum probes per agent (0 = unlimited)
MAX_PROBES_PER_AGENT=0
# Maximum workspace memberships per user (0 = unlimited)
MAX_WORKSPACES_PER_USER=0